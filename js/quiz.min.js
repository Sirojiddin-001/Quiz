import{render}from"./render.min.js";import{cards}from"./cards.min.js";let quiz,quiz_num;cards.map((a,b)=>render("div",{class:"card uk-card uk-card-default uk-box-shadow-small uk-box-shadow-hover-large",handlers:{click:function(){quiz_num=b;let c=localStorage.getItem("Quiz repeat "+quiz_num);0==c?UIkit.notification({message:`<span class="uk-margin-small-right" uk-icon="icon: warning; ratio: 2"></span> Количество попыток = 0 `,status:"warning",pos:"bottom-right"}):(quiz=new Quiz(a.data),document.querySelector(".full").style.display="flex",document.querySelector("#quiz_info").innerHTML=a.title,document.querySelector(".fill").style.width="100%",document.querySelector(".fill").style.backgroundColor="#007bff",document.body.style.overflow="hidden",quizQuestion.innerHTML=null==localStorage.getItem("Quiz repeat "+quiz_num)?`
          Количество вопросов - 10 <br>
          Время выполнения = 20 минут <br>
          Количество попыток = 3 `:`
          Количество вопросов - 10 <br>
          Время выполнения = 20 минут <br>
          Количество попыток = `+c)}},appendTo:"#app",appendIn:[render("div",{class:"uk-card-media-top",appendIn:[render("img",{class:"card-media",attr:{src:"./assets/image.jpg",alt:""}}),render("div",{class:"uk-card-body",appendIn:[render("h3",{class:"uk-card-title text-center",textContent:a.title})]})]})]}));const quizPages=document.getElementById("quiz_pages"),quizQuestion=document.getElementById("quiz_question"),button=document.getElementById("buttons"),startBtn=document.getElementById("start_button"),nextBtn=document.getElementById("next_button"),selectBtn=document.getElementById("select_button"),repeatBtn=document.getElementById("repeat_button"),quitBtn=document.getElementById("quit_button");class Quiz{constructor(a){this.question=a,this.current=0,this.score=0,this.selected=0,this.repeat=null==localStorage.getItem("Quiz repeat "+quiz_num)?3:parseInt(localStorage.getItem("Quiz repeat "+quiz_num))}}function Init(){for(let a in quizPages.innerHTML=quiz.current+1+" / "+quiz.question.length,quizQuestion.innerHTML=quiz.question[quiz.current].q,button.innerHTML="",nextBtn.setAttribute("disabled",""),quiz.question[quiz.current].o){let b=document.createElement("button");b.setAttribute("data",a),b.className="btn light_btn",b.textContent=quiz.question[quiz.current].o[a],b.addEventListener("click",function(){document.querySelectorAll("#buttons button").forEach(a=>{a.classList.remove("selected")}),document.querySelectorAll("#buttons button")[a].classList.add("selected"),quiz.selected=a,selectBtn.removeAttribute("disabled")}),button.appendChild(b)}quiz.current==quiz.question.length-1&&(nextBtn.innerHTML="\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C"),startBtn.addEventListener("click",()=>Start())}function Verify(){quizPages.innerHTML="\u041E\u0446\u0435\u043D\u043A\u0430: "+quiz.score+" \u0438\u0437 "+quiz.question.length,button.innerHTML="",quizQuestion.innerHTML=0==quiz.score?"\u0412\u0430\u043C \u043C\u043D\u043E\u0433\u043E\u043C\u0443 \u043D\u0443\u0436\u043D\u043E \u043D\u0430\u0443\u0447\u0438\u0442\u044C\u0441\u044F":4>quiz.score?"\u0412\u044B \u0443\u0436\u0435 \u043D\u0435\u043F\u043B\u043E\u0445\u043E \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044C":9>quiz.score?"\u0412\u0430\u0448 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u044B\u0448\u0435 \u0441\u0440\u0435\u0434\u043D\u0435\u0433\u043E":"\u0412\u044B \u0432 \u0441\u043E\u0432\u0435\u0440\u0448\u0435\u043D\u0441\u0442\u0432\u0435 \u0437\u043D\u0430\u0435\u0442\u0435 \u0442\u0435\u043C\u0443",selectBtn.style.display="none",nextBtn.style.display="none",repeatBtn.style.display="flex",quitBtn.style.display="flex"}function Select(){document.querySelectorAll("#buttons button").forEach(a=>{a.setAttribute("disabled","")}),quiz.selected==quiz.question[quiz.current].a?(quiz.score++,document.querySelectorAll("#buttons button")[quiz.selected].className="btn success_btn"):(document.querySelectorAll("#buttons button")[quiz.selected].className="btn danger_btn",document.querySelectorAll("#buttons button").forEach((a,b)=>{a.getAttribute("data")==quiz.question[quiz.current].a&&(document.querySelectorAll("#buttons button")[b].className="btn success_btn")})),selectBtn.setAttribute("disabled",""),nextBtn.removeAttribute("disabled")}function Start(){Shuffle(quiz.question),startBtn.style.display="none",quitBtn.style.display="none",selectBtn.style.display="flex",nextBtn.style.display="flex",nextBtn.innerHTML="\u0414\u0430\u043B\u0435\u0435",Init()}function Next(){quiz.current<quiz.question.length-1?(quiz.current++,Init(),console.log("object :>> ",quiz.current)):quiz.current==quiz.question.length-1&&(Verify(),null==localStorage.getItem("Quiz repeat "+quiz_num)?(quiz.repeat--,localStorage.setItem("Quiz repeat "+quiz_num,quiz.repeat),repeatBtn.innerHTML="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C | "+localStorage.getItem("Quiz repeat "+quiz_num)):(quiz.repeat=parseInt(localStorage.getItem("Quiz repeat "+quiz_num)),quiz.repeat--,localStorage.setItem("Quiz repeat "+quiz_num,quiz.repeat),repeatBtn.innerHTML="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C | "+localStorage.getItem("Quiz repeat "+quiz_num)))}function Repeat(){0<quiz.repeat?(repeatBtn.removeAttribute("disabled"),quiz.current=0,quiz.score=0,quiz.selected=0,Shuffle(quiz.question),nextBtn.innerHTML="\u0414\u0430\u043B\u0435\u0435",selectBtn.style.display="flex",nextBtn.style.display="flex",repeatBtn.style.display="none",quitBtn.style.display="none",Init()):(repeatBtn.setAttribute("disabled",""),console.log("ERROR"))}function Quit(){quiz.current=0,quiz.score=0,quiz.selected=0,document.body.style.overflow="auto",document.querySelector(".full").style.display="none",repeatBtn.style.display="none",startBtn.style.display="flex",quizPages.innerHTML="",quizQuestion.innerHTML=`
  Количество вопросов - 10 <br>
  Время выполнения = 20 минут <br>
  Количество попыток - `+quiz.repeat,Shuffle(quiz.question)}function Shuffle(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}let timeMinut;function Timer(){timeMinut=1200;let a=setInterval(function(){0>=timeMinut?(clearInterval(a),Quit(),quitBtn.style.display="flex",nextBtn.style.display="none",selectBtn.style.display="none",button.innerHTML="",UIkit.notification({message:`<span class="uk-margin-small-right" uk-icon="icon: warning; ratio: 2"></span> Время закончен !!! `,status:"warning",pos:"bottom-right"}),null==localStorage.getItem("Quiz repeat "+quiz_num)?(quiz.repeat--,localStorage.setItem("Quiz repeat "+quiz_num,quiz.repeat),repeatBtn.innerHTML="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C | "+localStorage.getItem("Quiz repeat "+quiz_num)):(quiz.repeat=parseInt(localStorage.getItem("Quiz repeat "+quiz_num)),quiz.repeat--,localStorage.setItem("Quiz repeat "+quiz_num,quiz.repeat),repeatBtn.innerHTML="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C | "+localStorage.getItem("Quiz repeat "+quiz_num))):quiz.current>=quiz.question.length-1?nextBtn.addEventListener("click",clearInterval(a)):(document.querySelector(".fill").style.width=100*(timeMinut/1200)+"%",120>timeMinut&&(document.querySelector(".fill").style.backgroundColor="gold"),60>timeMinut&&(document.querySelector(".fill").style.backgroundColor="#dc3545")),--timeMinut},1e3)}startBtn.addEventListener("click",function(){Timer(),Start()}),selectBtn.addEventListener("click",()=>Select()),nextBtn.addEventListener("click",()=>Next()),repeatBtn.addEventListener("click",function(){Timer(),Repeat()}),quitBtn.addEventListener("click",()=>Quit());